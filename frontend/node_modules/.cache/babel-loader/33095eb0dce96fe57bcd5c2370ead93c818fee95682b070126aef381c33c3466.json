{"ast":null,"code":"\"use client\";import{useState,useEffect,useContext}from\"react\";import axios from\"axios\";import{AuthContext}from\"../context/AuthContext\";import{API_URL}from\"../config\";import TicketList from\"../components/tickets/TicketList\";import CreateTicketForm from\"../components/tickets/CreateTicketForm\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserDashboard=()=>{const{user}=useContext(AuthContext);const[tickets,setTickets]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Fetch user's tickets\nuseEffect(()=>{const fetchTickets=async()=>{try{const config={headers:{Authorization:`Bearer ${user.token}`}};const res=await axios.get(`${API_URL}/api/tickets`,config);setTickets(res.data);setLoading(false);}catch(err){setError(\"Failed to fetch tickets\");setLoading(false);}};fetchTickets();},[user]);// Add new ticket to the list\nconst addTicket=ticket=>{setTickets([ticket,...tickets]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-8 text-2xl font-bold text-gray-900 dark:text-white\",children:\"My Support Tickets\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-8 md:grid-cols-[1fr_300px]\",children:[/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex h-40 items-center justify-center\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading tickets...\"})}):error?/*#__PURE__*/_jsx(\"div\",{className:\"rounded-md bg-red-50 p-4 dark:bg-red-900/30\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700 dark:text-red-200\",children:error})}):/*#__PURE__*/_jsx(TicketList,{tickets:tickets})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CreateTicketForm,{addTicket:addTicket})})]})]});};export default UserDashboard;","map":{"version":3,"names":["useState","useEffect","useContext","axios","AuthContext","API_URL","TicketList","CreateTicketForm","jsx","_jsx","jsxs","_jsxs","UserDashboard","user","tickets","setTickets","loading","setLoading","error","setError","fetchTickets","config","headers","Authorization","token","res","get","data","err","addTicket","ticket","className","children"],"sources":["/home/muaze/mini-project/frontend/src/pages/UserDashboard.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useContext } from \"react\"\nimport axios from \"axios\"\nimport { AuthContext } from \"../context/AuthContext\"\nimport { API_URL } from \"../config\"\nimport TicketList from \"../components/tickets/TicketList\"\nimport CreateTicketForm from \"../components/tickets/CreateTicketForm\"\n\nconst UserDashboard = () => {\n  const { user } = useContext(AuthContext)\n  const [tickets, setTickets] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n\n  // Fetch user's tickets\n  useEffect(() => {\n    const fetchTickets = async () => {\n      try {\n        const config = {\n          headers: {\n            Authorization: `Bearer ${user.token}`,\n          },\n        }\n\n        const res = await axios.get(`${API_URL}/api/tickets`, config)\n        setTickets(res.data)\n        setLoading(false)\n      } catch (err) {\n        setError(\"Failed to fetch tickets\")\n        setLoading(false)\n      }\n    }\n\n    fetchTickets()\n  }, [user])\n\n  // Add new ticket to the list\n  const addTicket = (ticket) => {\n    setTickets([ticket, ...tickets])\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"mb-8 text-2xl font-bold text-gray-900 dark:text-white\">My Support Tickets</h1>\n\n      <div className=\"grid gap-8 md:grid-cols-[1fr_300px]\">\n        <div>\n          {loading ? (\n            <div className=\"flex h-40 items-center justify-center\">\n              <p>Loading tickets...</p>\n            </div>\n          ) : error ? (\n            <div className=\"rounded-md bg-red-50 p-4 dark:bg-red-900/30\">\n              <p className=\"text-sm text-red-700 dark:text-red-200\">{error}</p>\n            </div>\n          ) : (\n            <TicketList tickets={tickets} />\n          )}\n        </div>\n        <div>\n          <CreateTicketForm addTicket={addTicket} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default UserDashboard\n\n"],"mappings":"AAAA,YAAY,CAEZ,OAASA,QAAQ,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CACvD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,wBAAwB,CACpD,OAASC,OAAO,KAAQ,WAAW,CACnC,MAAO,CAAAC,UAAU,KAAM,kCAAkC,CACzD,MAAO,CAAAC,gBAAgB,KAAM,wCAAwC,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErE,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAEC,IAAK,CAAC,CAAGX,UAAU,CAACE,WAAW,CAAC,CACxC,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACkB,KAAK,CAAEC,QAAQ,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAExC;AACAC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAmB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,MAAM,CAAG,CACbC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUV,IAAI,CAACW,KAAK,EACrC,CACF,CAAC,CAED,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAtB,KAAK,CAACuB,GAAG,CAAC,GAAGrB,OAAO,cAAc,CAAEgB,MAAM,CAAC,CAC7DN,UAAU,CAACU,GAAG,CAACE,IAAI,CAAC,CACpBV,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAOW,GAAG,CAAE,CACZT,QAAQ,CAAC,yBAAyB,CAAC,CACnCF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDG,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACP,IAAI,CAAC,CAAC,CAEV;AACA,KAAM,CAAAgB,SAAS,CAAIC,MAAM,EAAK,CAC5Bf,UAAU,CAAC,CAACe,MAAM,CAAE,GAAGhB,OAAO,CAAC,CAAC,CAClC,CAAC,CAED,mBACEH,KAAA,QAAKoB,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CvB,IAAA,OAAIsB,SAAS,CAAC,uDAAuD,CAAAC,QAAA,CAAC,oBAAkB,CAAI,CAAC,cAE7FrB,KAAA,QAAKoB,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDvB,IAAA,QAAAuB,QAAA,CACGhB,OAAO,cACNP,IAAA,QAAKsB,SAAS,CAAC,uCAAuC,CAAAC,QAAA,cACpDvB,IAAA,MAAAuB,QAAA,CAAG,oBAAkB,CAAG,CAAC,CACtB,CAAC,CACJd,KAAK,cACPT,IAAA,QAAKsB,SAAS,CAAC,6CAA6C,CAAAC,QAAA,cAC1DvB,IAAA,MAAGsB,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAEd,KAAK,CAAI,CAAC,CAC9D,CAAC,cAENT,IAAA,CAACH,UAAU,EAACQ,OAAO,CAAEA,OAAQ,CAAE,CAChC,CACE,CAAC,cACNL,IAAA,QAAAuB,QAAA,cACEvB,IAAA,CAACF,gBAAgB,EAACsB,SAAS,CAAEA,SAAU,CAAE,CAAC,CACvC,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAjB,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}