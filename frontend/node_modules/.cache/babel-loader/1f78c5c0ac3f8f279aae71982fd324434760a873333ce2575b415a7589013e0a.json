{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"/home/muaze/mini-project/frontend/src/pages/AdminDashboard.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { API_URL } from \"../config\";\nimport AdminTicketList from \"../components/tickets/AdminTicketList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminDashboard = () => {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [tickets, setTickets] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Fetch all tickets\n  useEffect(() => {\n    const fetchTickets = async () => {\n      try {\n        const config = {\n          headers: {\n            Authorization: `Bearer ${user.token}`\n          }\n        };\n        const res = await axios.get(`${API_URL}/api/tickets`, config);\n        setTickets(res.data);\n        setLoading(false);\n      } catch (err) {\n        setError(\"Failed to fetch tickets\");\n        setLoading(false);\n      }\n    };\n    fetchTickets();\n  }, [user]);\n\n  // Update ticket status\n  const updateTicketStatus = async (ticketId, status) => {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`,\n          \"Content-Type\": \"application/json\"\n        }\n      };\n      const res = await axios.put(`${API_URL}/api/tickets/${ticketId}`, {\n        status\n      }, config);\n\n      // Update tickets in state\n      setTickets(tickets.map(ticket => ticket._id === ticketId ? {\n        ...ticket,\n        status: res.data.status\n      } : ticket));\n      return true;\n    } catch (err) {\n      return false;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto px-4 py-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"mb-8 text-2xl font-bold text-gray-900 dark:text-white\",\n      children: \"All Support Tickets\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex h-40 items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading tickets...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded-md bg-red-50 p-4 dark:bg-red-900/30\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-red-700 dark:text-red-200\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(AdminTicketList, {\n      tickets: tickets,\n      updateTicketStatus: updateTicketStatus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminDashboard, \"fhHA1bVxGg120d7WKWYEuKCJudc=\");\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","useContext","axios","AuthContext","API_URL","AdminTicketList","jsxDEV","_jsxDEV","AdminDashboard","user","tickets","setTickets","loading","setLoading","error","setError","fetchTickets","config","headers","Authorization","token","res","get","data","err","updateTicketStatus","ticketId","status","put","map","ticket","_id","className","children","fileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/muaze/mini-project/frontend/src/pages/AdminDashboard.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useContext } from \"react\"\nimport axios from \"axios\"\nimport { AuthContext } from \"../context/AuthContext\"\nimport { API_URL } from \"../config\"\nimport AdminTicketList from \"../components/tickets/AdminTicketList\"\n\nconst AdminDashboard = () => {\n  const { user } = useContext(AuthContext)\n  const [tickets, setTickets] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n\n  // Fetch all tickets\n  useEffect(() => {\n    const fetchTickets = async () => {\n      try {\n        const config = {\n          headers: {\n            Authorization: `Bearer ${user.token}`,\n          },\n        }\n\n        const res = await axios.get(`${API_URL}/api/tickets`, config)\n        setTickets(res.data)\n        setLoading(false)\n      } catch (err) {\n        setError(\"Failed to fetch tickets\")\n        setLoading(false)\n      }\n    }\n\n    fetchTickets()\n  }, [user])\n\n  // Update ticket status\n  const updateTicketStatus = async (ticketId, status) => {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`,\n          \"Content-Type\": \"application/json\",\n        },\n      }\n\n      const res = await axios.put(`${API_URL}/api/tickets/${ticketId}`, { status }, config)\n\n      // Update tickets in state\n      setTickets(tickets.map((ticket) => (ticket._id === ticketId ? { ...ticket, status: res.data.status } : ticket)))\n\n      return true\n    } catch (err) {\n      return false\n    }\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"mb-8 text-2xl font-bold text-gray-900 dark:text-white\">All Support Tickets</h1>\n\n      {loading ? (\n        <div className=\"flex h-40 items-center justify-center\">\n          <p>Loading tickets...</p>\n        </div>\n      ) : error ? (\n        <div className=\"rounded-md bg-red-50 p-4 dark:bg-red-900/30\">\n          <p className=\"text-sm text-red-700 dark:text-red-200\">{error}</p>\n        </div>\n      ) : (\n        <AdminTicketList tickets={tickets} updateTicketStatus={updateTicketStatus} />\n      )}\n    </div>\n  )\n}\n\nexport default AdminDashboard\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}