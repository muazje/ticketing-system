{"ast":null,"code":"\"use client\";import{useState,useContext}from\"react\";import axios from\"axios\";import{AuthContext}from\"../../context/AuthContext\";import{API_URL}from\"../../config\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateTicketForm=_ref=>{let{addTicket}=_ref;const{user}=useContext(AuthContext);const[formData,setFormData]=useState({title:\"\",description:\"\"});const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");const[success,setSuccess]=useState(\"\");const{title,description}=formData;const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();setError(\"\");setSuccess(\"\");setLoading(true);try{const config={headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${user.token}`}};const res=await axios.post(`${API_URL}/api/tickets`,formData,config);addTicket(res.data);setFormData({title:\"\",description:\"\"});setSuccess(\"Ticket created successfully\");setTimeout(()=>setSuccess(\"\"),3000);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to create ticket\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card animate-slide-up\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-b border-gray-200 bg-gray-50/50 px-4 py-3 dark:border-gray-700 dark:bg-gray-800/50\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-white\",children:\"Create New Ticket\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500 dark:text-gray-400\",children:\"Submit a new support request\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mx-4 mt-4 rounded-lg bg-red-50 p-3 dark:bg-red-900/30\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700 dark:text-red-200\",children:error})}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"mx-4 mt-4 rounded-lg bg-green-50 p-3 dark:bg-green-900/30\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-700 dark:text-green-200\",children:success})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-4 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"block text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:title,onChange:handleChange,required:true,placeholder:\"Brief description of the issue\",className:\"input-modern mt-1\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"block text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",value:description,onChange:handleChange,required:true,rows:\"5\",placeholder:\"Provide details about your issue\",className:\"input-modern mt-1\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"button-primary w-full\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"h-5 w-5 animate-spin text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:\"Creating ticket...\"})]}):\"Submit Ticket\"})]})]});};export default CreateTicketForm;","map":{"version":3,"names":["useState","useContext","axios","AuthContext","API_URL","jsx","_jsx","jsxs","_jsxs","CreateTicketForm","_ref","addTicket","user","formData","setFormData","title","description","loading","setLoading","error","setError","success","setSuccess","handleChange","e","target","name","value","handleSubmit","preventDefault","config","headers","Authorization","token","res","post","data","setTimeout","err","_err$response","_err$response$data","response","message","className","children","onSubmit","htmlFor","type","id","onChange","required","placeholder","rows","disabled","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d"],"sources":["/home/muaze/mini-project/frontend/src/components/tickets/CreateTicketForm.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useContext } from \"react\"\nimport axios from \"axios\"\nimport { AuthContext } from \"../../context/AuthContext\"\nimport { API_URL } from \"../../config\"\n\nconst CreateTicketForm = ({ addTicket }) => {\n  const { user } = useContext(AuthContext)\n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n  })\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(\"\")\n  const [success, setSuccess] = useState(\"\")\n\n  const { title, description } = formData\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value })\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    setError(\"\")\n    setSuccess(\"\")\n    setLoading(true)\n\n    try {\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${user.token}`,\n        },\n      }\n\n      const res = await axios.post(`${API_URL}/api/tickets`, formData, config)\n\n      addTicket(res.data)\n      setFormData({\n        title: \"\",\n        description: \"\",\n      })\n      setSuccess(\"Ticket created successfully\")\n\n      setTimeout(() => setSuccess(\"\"), 3000)\n    } catch (err) {\n      setError(err.response?.data?.message || \"Failed to create ticket\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"card animate-slide-up\">\n      <div className=\"border-b border-gray-200 bg-gray-50/50 px-4 py-3 dark:border-gray-700 dark:bg-gray-800/50\">\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">Create New Ticket</h3>\n        <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">Submit a new support request</p>\n      </div>\n\n      {error && (\n        <div className=\"mx-4 mt-4 rounded-lg bg-red-50 p-3 dark:bg-red-900/30\">\n          <p className=\"text-sm text-red-700 dark:text-red-200\">{error}</p>\n        </div>\n      )}\n\n      {success && (\n        <div className=\"mx-4 mt-4 rounded-lg bg-green-50 p-3 dark:bg-green-900/30\">\n          <p className=\"text-sm text-green-700 dark:text-green-200\">{success}</p>\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit} className=\"p-4 space-y-4\">\n        <div>\n          <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n            Title\n          </label>\n          <input\n            type=\"text\"\n            id=\"title\"\n            name=\"title\"\n            value={title}\n            onChange={handleChange}\n            required\n            placeholder=\"Brief description of the issue\"\n            className=\"input-modern mt-1\"\n          />\n        </div>\n\n        <div>\n          <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n            Description\n          </label>\n          <textarea\n            id=\"description\"\n            name=\"description\"\n            value={description}\n            onChange={handleChange}\n            required\n            rows=\"5\"\n            placeholder=\"Provide details about your issue\"\n            className=\"input-modern mt-1\"\n          ></textarea>\n        </div>\n\n        <button type=\"submit\" disabled={loading} className=\"button-primary w-full\">\n          {loading ? (\n            <div className=\"flex items-center justify-center\">\n              <svg\n                className=\"h-5 w-5 animate-spin text-white\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n              >\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                <path\n                  className=\"opacity-75\"\n                  fill=\"currentColor\"\n                  d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                ></path>\n              </svg>\n              <span className=\"ml-2\">Creating ticket...</span>\n            </div>\n          ) : (\n            \"Submit Ticket\"\n          )}\n        </button>\n      </form>\n    </div>\n  )\n}\n\nexport default CreateTicketForm\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}