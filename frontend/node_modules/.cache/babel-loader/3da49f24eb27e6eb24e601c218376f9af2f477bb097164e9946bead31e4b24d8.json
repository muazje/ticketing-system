{"ast":null,"code":"\"use client\";import{createContext,useState,useEffect}from\"react\";import axios from\"axios\";import{API_URL}from\"../config\";import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[isAuthenticated,setIsAuthenticated]=useState(false);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Load user from localStorage on initial load\nuseEffect(()=>{const loadUser=()=>{const storedUser=localStorage.getItem(\"user\");if(storedUser){const parsedUser=JSON.parse(storedUser);setUser(parsedUser);setIsAuthenticated(true);}setLoading(false);};loadUser();},[]);// Register user\nconst register=async userData=>{try{setError(null);const res=await axios.post(`${API_URL}/api/auth/signup`,userData);if(res.data&&res.data.token){localStorage.setItem(\"user\",JSON.stringify(res.data));setUser(res.data);setIsAuthenticated(true);}return res.data;}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Registration failed\");throw err;}};// Login user\nconst login=async(email,password)=>{try{setError(null);const res=await axios.post(`${API_URL}/api/auth/login`,{email,password});if(res.data&&res.data.token){localStorage.setItem(\"user\",JSON.stringify(res.data));setUser(res.data);setIsAuthenticated(true);}return res.data;}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Login failed\");throw err;}};// Logout user\nconst logout=()=>{localStorage.removeItem(\"user\");setUser(null);setIsAuthenticated(false);};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,isAuthenticated,loading,error,register,login,logout},children:children});};","map":{"version":3,"names":["createContext","useState","useEffect","axios","API_URL","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","isAuthenticated","setIsAuthenticated","loading","setLoading","error","setError","loadUser","storedUser","localStorage","getItem","parsedUser","JSON","parse","register","userData","res","post","data","token","setItem","stringify","err","_err$response","_err$response$data","response","message","login","email","password","_err$response2","_err$response2$data","logout","removeItem","Provider","value"],"sources":["/home/muaze/mini-project/frontend/src/context/AuthContext.js"],"sourcesContent":["\"use client\"\n\nimport { createContext, useState, useEffect } from \"react\"\nimport axios from \"axios\"\nimport { API_URL } from \"../config\"\n\nexport const AuthContext = createContext()\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null)\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n\n  // Load user from localStorage on initial load\n  useEffect(() => {\n    const loadUser = () => {\n      const storedUser = localStorage.getItem(\"user\")\n      if (storedUser) {\n        const parsedUser = JSON.parse(storedUser)\n        setUser(parsedUser)\n        setIsAuthenticated(true)\n      }\n      setLoading(false)\n    }\n\n    loadUser()\n  }, [])\n\n  // Register user\n  const register = async (userData) => {\n    try {\n      setError(null)\n      const res = await axios.post(`${API_URL}/api/auth/signup`, userData)\n\n      if (res.data && res.data.token) {\n        localStorage.setItem(\"user\", JSON.stringify(res.data))\n        setUser(res.data)\n        setIsAuthenticated(true)\n      }\n\n      return res.data\n    } catch (err) {\n      setError(err.response?.data?.message || \"Registration failed\")\n      throw err\n    }\n  }\n\n  // Login user\n  const login = async (email, password) => {\n    try {\n      setError(null)\n      const res = await axios.post(`${API_URL}/api/auth/login`, { email, password })\n\n      if (res.data && res.data.token) {\n        localStorage.setItem(\"user\", JSON.stringify(res.data))\n        setUser(res.data)\n        setIsAuthenticated(true)\n      }\n\n      return res.data\n    } catch (err) {\n      setError(err.response?.data?.message || \"Login failed\")\n      throw err\n    }\n  }\n\n  // Logout user\n  const logout = () => {\n    localStorage.removeItem(\"user\")\n    setUser(null)\n    setIsAuthenticated(false)\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        isAuthenticated,\n        loading,\n        error,\n        register,\n        login,\n        logout,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}